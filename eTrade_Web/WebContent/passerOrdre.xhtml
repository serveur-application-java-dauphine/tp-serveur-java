<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
    <h:body>
 
    	<h1>eTrade</h1>

	  	<h:form>
 	
		  	Société*: 
			<h:selectOneMenu value="#{ordreManagedBean.ordre.produit.societe.idSociete}" onchange="submit()" 
				valueChangeListener="#{ordreManagedBean.changeSocieteListener}">
	   			<f:selectItems value="#{societeManagedBean.listSocietes}" var="societe" 
	   				itemValue="#{societe.idSociete}" itemLabel="#{societe.name}"/> 
	   		</h:selectOneMenu>
	   		<br /><br />
	 
			Produit*: 
			<h:selectOneMenu value="#{ordreManagedBean.ordre.produit.typeProduit}" onchange="submit()" 
	   			valueChangeListener="#{ordreManagedBean.changeTypeProduitListener}" >
	   			<f:selectItems value="#{produitManagedBean.getListProduitParSocieteID(ordreManagedBean.ordre.produit.societe.idSociete)}" var="produit" 
	   				itemValue="#{produit.typeProduit.idTypeProduit}" itemLabel="#{produit.typeProduit.libelle}"/> 
	   		</h:selectOneMenu>
	   		<br /><br />

	   		<h:outputLabel for="direction">Direction<span class="requis">*:</span></h:outputLabel> 		
			<h:selectOneRadio  value="#{ordreManagedBean.ordre.directionOrdre.idDirectionOrdre}">
	   			<f:selectItems value="#{ordreManagedBean.listDirectionOrdres}" var="direction"
	   			itemValue="#{direction.idDirectionOrdre}" itemLabel="#{direction.libelle}" />
	   		</h:selectOneRadio>
	   		<br /><br />
	   		
	   		<h:outputLabel for="typeOrdre">Type de l'ordre<span class="requis">*:</span></h:outputLabel> 
			<h:selectOneMenu id="typeOrdre" value="#{ordreManagedBean.ordre.typeOrdre.idTypeOrder}" onchange="submit()"
				valueChangeListener="#{ordreManagedBean.changeTypeOrdreListener}">
	   			<f:selectItems value="#{ordreManagedBean.listTypeOrdres}" var="type"
	   				itemValue="#{type.idTypeOrder}" itemLabel="#{type.libelle}"/> 
	   		</h:selectOneMenu>
	   		<br /><br />
	   		
	   		
	       	<h:outputLabel for="quantite">Quantité<span class="requis">*:</span></h:outputLabel>
	        <h:inputText id="quantite" value="#{ordreManagedBean.ordre.quantite}" required="true" size="20" maxlength="60" />
	        <h:message id="nomMessage" for="quantite" errorClass="erreur" />
	        <br /><br />
	 
	 		<!-- Si l'ordre n'est pas du type au marché -->
	        
   			<h:outputLabel for="prix" rendered="#{ordreManagedBean.ordre.typeOrdre.idTypeOrder > 1 }">Prix<span class="requis">*:</span></h:outputLabel>
          	<h:inputText id="prix" rendered="#{ordreManagedBean.ordre.typeOrdre.idTypeOrder > 1 }" value="#{ordreManagedBean.ordre.prix}" default="Le prix souhaité" required="false" size="20" maxlength="60" />
 		<h:commandButton value="Passer l'ordre" action="#{ordreManagedBean.passerOrdre()}" styleClass="sansLabel" type="submit"/>
	</h:form>
	
 
    </h:body>
</html>